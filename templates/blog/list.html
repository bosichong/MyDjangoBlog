{% extends 'base.html' %}
{% load mytags %}
{% block site_title %}Blog | 人生苦短 17python {% endblock %}


{% block nav %}
      <li class="{% if page_url == '/' %}am-active{% endif %}"><a href="{% url '' %}">Home</a></li>
      <li class="{% if page_url == '/?c=1' %}am-active{% endif %}"><a href="{% url '' %}?c=1">Python</a></li>
      <li class="{% if page_url == '/?c=2' %}am-active{% endif %}"><a href="{% url '' %}?c=2">Django</a></li>
      <li ><a href="#">About me</a></li>
{% endblock nav %}


{% block article %}
{% for article in contacts %}
<article class="blog-main">
      
      <h3 class="am-article-title blog-title">
        <a href="/blog/{{ article.id }}">{{ article.article_title }}</a>
      </h3>
      <h4 class="am-article-meta blog-meta">by <a href="" class="am-text-warning">{{ article.article_user.user_nick_name }}</a>
         / posted on<span class="am-text-success"> {{ article.article_create_time }} </span>
       / <a href="{% url '' %}?c={{ article.article_category.id}}" class="am-text-secondary">{{ article.article_category }}</a>
      </h4>

      <div class="blog-content">
       {% autoescape off %}
        {{ article.article_synopsis|toMarkdown }}
       {% endautoescape %}
    
    
      </div>
 </article>
<a href="/blog/{{ article.id }}" class="am-text-warning">CONTINUE READING</a>
  <hr class="am-article-divider blog-hr">
  
{% endfor %}




<!-- 翻页  -->
<div class="am-pagination am-pagination-centered">
    
        {% if contacts.has_previous %}
            <li class=""><a href="?{% if c != '' %}c={{ c }}&{% endif %}{% if s != '' %}s={{ s }}&{% endif %}p={{ contacts.previous_page_number }}">&laquo; 上一页</a></li>
        {% endif %}

        {% for p in contacts.paginator.page_range %}
           <li><a href="?{% if c != '' %}c={{ c }}&{% endif %}{% if s != '' %}s={{ s }}&{% endif %}p={{ p }}">{{ p }}</a></li>
        {% endfor %}

        {% if contacts.has_next %}
            <li class=""><a href="?{% if c != '' %}c={{ c }}&{% endif %}{% if s != '' %}s={{ s }}&{% endif %}p={{ contacts.next_page_number }}">下一页 &raquo;</a></li>
        {% endif %}
    
</div>

{% endblock %}


{% block me %} 
      <section class="am-panel am-panel-default">
        <div class="am-panel-hd">About Me</div>
        <div class="am-panel-bd">
          <div class="avatar">
            <img class="am-circle am-center" src="{% url 'media' userinfo.user_image %}" width="140" height="140"/>
          </div>
          <div class="am-text-center am-text-lg nick-name">{{ userinfo.user_nick_name }}</div>
          <div class="am-text-center am-text-xs ">{{ userinfo.user_detail }}</div>
        </div>
      </section>
{% endblock %}


{% block category %}
<section class="am-panel am-panel-default blog-cat">
        <div class="am-panel-hd">Category</div>
        <ul class="am-list am-list-border">
          {% for c in categorys %}
            
          <li><a href="{% url '' %}?c={{ c.id }}">
            <i class="{{ c.category_icon }}"></i>
            {{ c.category_name }}
           <span class="am-badge am-align-right">{{ c.id|cat_count  }}</span> 
          </a>
            
          </li>
            
          {% endfor %}
          

        </ul>
      </section>
{% endblock %}

{% block footer %} 
  {% autoescape off %}
    {{ siteinfo.site_footer }}
  {% endautoescape %}
    

{% endblock %}